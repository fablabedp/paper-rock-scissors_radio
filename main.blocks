<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id=",|jHSG{.jC+cJXaehB3G">start</variable><variable id="sy4)7|F8zho}{F)BkO_Y">hand</variable><variable id="4JPrp!d%7pat*O,-)wto">hand_sent</variable><variable id="IysI%cH8PN7ZlxUYosic">count</variable></variables><comment id="CC8Gf^rclRt:jdDWh88N" data="0" x="22" y="-200" h="120" w="480">A Paper, Rock, Scissors game played between two microbits via radio connection

It works with two microbits on the same radio channel.  If there are more than two, it will probably be a mess.</comment><block type="device_gesture_event" id=";WI1t3p$]zBgHbjYsg}d" x="1350" y="-128"><field name="NAME">Gesture.Shake</field><statement name="HANDLER"><block type="controls_if" id="Uq+C_x%L3[V}6?ZU=e|q"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="i]s_#-w1cd5ME.*MRg%%"><field name="VAR" id=",|jHSG{.jC+cJXaehB3G">start</field></block></value><statement name="DO0"><block type="variables_change" id="WnSH]soU5Ucob2V-8FL@"><field name="VAR" id="IysI%cH8PN7ZlxUYosic">count</field><comment>if the game state is ready, each time we shake the microbit we count down the shake counter</comment><value name="VALUE"><shadow type="math_number" id="[l99D9gws5S-(npd{}!}"><field name="NUM">-1</field></shadow></value><next><block type="controls_if" id="p]6+=196?)VF`Ggl5Yhh"><mutation elseif="4"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="NyuKXH:Yy=O~x2A3O[:m"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id=";%y/|1vxB5ls{#/^`It#"><field name="VAR" id="IysI%cH8PN7ZlxUYosic">count</field></block></value><value name="B"><shadow type="math_number" id="|%`TD.8cy*=xj8,9uWE/"><field name="NUM">4</field></shadow></value></block></value><statement name="DO0"><block type="basic_show_icon" id=";bTn29.Ooo32G@n*wYP!"><field name="i">IconNames.Yes</field><comment>the first shake we hide the hand and replace it with a tick</comment></block></statement><value name="IF1"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="KS.ze?Ji[V3.H:!;D$4e"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id=")6Ye0`DPg3zC%#)UV!/v"><field name="VAR" id="IysI%cH8PN7ZlxUYosic">count</field></block></value><value name="B"><shadow type="math_number" id="Y}6;Ew)NJmVaI+/i7^:H"><field name="NUM">3</field></shadow></value></block></value><statement name="DO1"><block type="device_play_note" id="kSZ#Dv2V/5B@ilm@L}0|"><value name="note"><shadow type="device_note" id="wD(Pa0*=CMmrCYyGE!)R"><field name="name">523</field></shadow></value><value name="duration"><shadow type="device_beat" id="25S0n;wHuf0gsyHnt9o9"><field name="fraction">BeatFraction.Eighth</field></shadow></value><next><block type="device_show_number" id="i@k9FcTqBIDm[wP5*mU3"><comment>the next three shakes, we count down</comment><value name="number"><block type="variables_get" id="]zW%P)m=2iszH$J?KfrM"><field name="VAR" id="IysI%cH8PN7ZlxUYosic">count</field></block></value></block></next></block></statement><value name="IF2"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="G3/VB}n3iQLU)L6Z_X-H"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="qL$yqgsJvMo|R_F}OCXk"><field name="VAR" id="IysI%cH8PN7ZlxUYosic">count</field></block></value><value name="B"><shadow type="math_number" id="6lar~y,_)B!{Aqrk{E#L"><field name="NUM">2</field></shadow></value></block></value><statement name="DO2"><block type="device_play_note" id="P`(LliOR`R,i)7u_vm{a"><value name="note"><shadow type="device_note" id="D+G{tjl7?$v=Cd}whI8C"><field name="name">659</field></shadow></value><value name="duration"><shadow type="device_beat" id="|1ta5n.#}:5h?7+U%2?b"><field name="fraction">BeatFraction.Eighth</field></shadow></value><next><block type="device_show_number" id="oa7OeYD:C+CD+Gi}8y}c"><value name="number"><block type="variables_get" id="ZM[.o4FD:g$#m/NRPId="><field name="VAR" id="IysI%cH8PN7ZlxUYosic">count</field></block></value></block></next></block></statement><value name="IF3"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="w#B_}6)^d~=^+3YGgg1n"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="RgPaIQi~rfFDYy/ca5eP"><field name="VAR" id="IysI%cH8PN7ZlxUYosic">count</field></block></value><value name="B"><shadow type="math_number" id="]zAXUtI7Ssc@+vw(ny0?"><field name="NUM">1</field></shadow></value></block></value><statement name="DO3"><block type="device_play_note" id="Hz!]h.YagCiFrQ$o|EDM"><value name="note"><shadow type="device_note" id="y4q5CuH{zLL!]FOqbON)"><field name="name">784</field></shadow></value><value name="duration"><shadow type="device_beat" id="6#uriu)RqQ9c#S8{ZB?f"><field name="fraction">BeatFraction.Eighth</field></shadow></value><next><block type="device_show_number" id="7;LY)XK+!|UWLI92vb:z"><value name="number"><block type="variables_get" id="@UwqWUpda%5DO7wd/6m,"><field name="VAR" id="IysI%cH8PN7ZlxUYosic">count</field></block></value></block></next></block></statement><value name="IF4"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="f^kMYb*}I$eh9_5n7_uY"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="8)*I`kC:8d0C$z8qQYZ:"><field name="VAR" id="IysI%cH8PN7ZlxUYosic">count</field></block></value><value name="B"><shadow type="math_number" id="D1?lUS+Cz]=(`%[c,uEB"><field name="NUM">0</field></shadow></value></block></value><statement name="DO4"><block type="function_call" id="N9DE%9snWKM*C:uBcLH{"><mutation name="showHand" functionid="urA_;gxdKderFu(pM$LP"/><comment>on the final shake. we show our hand and send the hand number as a radio message</comment><next><block type="device_play_note" id="h*ZHCfZ?Br}0jfdo2)R1"><value name="note"><shadow type="device_note" id="[Ltsiq]H,^v{pf!k?wnc"><field name="name">262</field></shadow></value><value name="duration"><shadow type="device_beat" id="Z.v6n_5oI|)I-KgCDA{A"><field name="fraction">BeatFraction.Sixteenth</field></shadow></value><next><block type="device_play_note" id="#|ygM_.3Vq*(HWR0IuD*"><value name="note"><shadow type="device_note" id="+4M:b1{2+?jA!|r3%52e"><field name="name">392</field></shadow></value><value name="duration"><shadow type="device_beat" id="R9)+,DF@(u2~FcFf$Y:s"><field name="fraction">BeatFraction.Sixteenth</field></shadow></value><next><block type="device_play_note" id="8pV6^gm0lU0CW@xE:_2B"><value name="note"><shadow type="device_note" id="ns:$i~N4@]WDE{Jxp|5d"><field name="name">494</field></shadow></value><value name="duration"><shadow type="device_beat" id="Ctf%=#B}q:*.wHme94QO"><field name="fraction">BeatFraction.Eighth</field></shadow></value><next><block type="device_play_note" id="=,,_]i#L`F:0`_tm!gf;"><value name="note"><shadow type="device_note" id="!ir(MR~-T+pskT3:{OAT"><field name="name">523</field></shadow></value><value name="duration"><shadow type="device_beat" id="@MBJCtm+2-Q_u[HQ86Mo"><field name="fraction">BeatFraction.Half</field></shadow></value><next><block type="radio_datagram_send" id="I+@@h#VNwH?q8h,$%a!H"><value name="value"><block type="variables_get" id="l;KAd2YAOA!bhF@MZ*qf"><field name="VAR" id="sy4)7|F8zho}{F)BkO_Y">hand</field></block></value><next><block type="variables_set" id="N:%dTH1W@$jk4!$:TRiK"><field name="VAR" id="4JPrp!d%7pat*O,-)wto">hand_sent</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="uopfzQlx~E(ZDPSV/C-;"><field name="BOOL">TRUE</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></next></block></statement></block></statement></block><block type="pxt-on-start" id="-cWiX($hr%PBmOdql8Zk" x="0" y="0"><statement name="HANDLER"><block type="variables_set" id="|3r-QLY4M-S;.?~udkLa"><field name="VAR" id=",|jHSG{.jC+cJXaehB3G">start</field><comment>the start variable stores the game state for the microbit -
false = "waiting": not yet connected to another microbit, or waiting for a new game to begin
true = "ready": connected and ready to play</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="I6a!0NXXQFU(k1WCodr_"><field name="BOOL">FALSE</field></block></value><next><block type="radio_set_group" id="._LcDUv~`u9*hd=2jkz*"><value name="ID"><shadow type="math_number_minmax" id="AaS()D=LPhHNCAs}g@G:"><mutation min="0" max="255" label="Number" precision="0"/><field name="SLIDER">1</field></shadow></value><next><block type="device_while" id="QhSDfb$5Fe@dw4LNhNxG"><comment>while the microbit is not connected, keep sending a message on the radio channel until the game state changes</comment><value name="COND"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="]I|:l0cgq_o08-E]E0N8"><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="0?[,=(IJPIYYLLL#y./y"><field name="VAR" id=",|jHSG{.jC+cJXaehB3G">start</field></block></value></block></value><statement name="DO"><block type="device_play_note" id="H!e{n?9WprQS`4qx;_D6"><value name="note"><shadow type="device_note" id="$Sj|#_SfP{UTOATk~2Bw"><field name="name">392</field></shadow></value><value name="duration"><shadow type="device_beat" id="TlQATW9^[t`#Swly(IP!"><field name="fraction">BeatFraction.Eighth</field></shadow></value><next><block type="radio_datagram_send_string" id="g5s}DD3~FIaH$:]C`We`"><value name="msg"><shadow type="text" id="5.|rL:R|[P3;=b5ch_cR"><field name="TEXT">hello?</field></shadow></value><next><block type="basic_show_icon" id="HK.t9mG(PQh~3_:L+-;e"><field name="i">IconNames.Square</field><next><block type="basic_show_icon" id="z:Q`vw!HwHK4j,cM:WPF"><field name="i">IconNames.Diamond</field><next><block type="basic_show_icon" id="$?/08`X);CxfwI75MS{Z"><field name="i">IconNames.Scissors</field><next><block type="controls_if" id="gi3JE-O%A*bD]z#77CH("><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="pFp,pXs7lE;5Wm5,Oomk"><field name="VAR" id=",|jHSG{.jC+cJXaehB3G">start</field></block></value><statement name="DO0"><block type="basic_show_icon" id="%h4Gk}wL3{Yu#}RH?tau"><field name="i">IconNames.Yes</field></block></statement></block></next></block></next></block></next></block></next></block></next></block></statement></block></next></block></next></block></statement></block><block type="device_button_event" id="Bx/I=Q`Bh~{V.8_};#^_" x="493" y="-23"><field name="NAME">Button.A</field><comment>if the game state is "ready", we can use the buttons to choose a hand</comment><statement name="HANDLER"><block type="controls_if" id="Be]Cw4Ivs1wUx%[AT7+9"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="[F!O}X+S3:i5v`,/YLuE"><field name="VAR" id=",|jHSG{.jC+cJXaehB3G">start</field></block></value><statement name="DO0"><block type="variables_change" id=":Pz)S-+bp1eHIwKPoOEL"><field name="VAR" id="sy4)7|F8zho}{F)BkO_Y">hand</field><value name="VALUE"><shadow type="math_number" id="mm[}O_kr7nAfH!P9X|+?"><field name="NUM">-1</field></shadow></value><next><block type="controls_if" id=".#7pDde3|HD1s3KVStCI"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="ipAS;U^I=vps!4=PR;-D"><field name="OP">LT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="?TW(XGrVezhB+Jht9b3b"><field name="VAR" id="sy4)7|F8zho}{F)BkO_Y">hand</field></block></value><value name="B"><shadow type="math_number" id="uk,q6M^;lpS@.E/6!O2]"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="LOm)|+Ce/{#Iz$Rzyxso"><field name="VAR" id="sy4)7|F8zho}{F)BkO_Y">hand</field><value name="VALUE"><shadow type="math_number" id="A}RJr`()EZcR/sQ=Uj+}"><field name="NUM">2</field></shadow></value></block></statement><next><block type="function_call" id="]G}b^ayi=gR6Xv/S3xu0"><mutation name="showHand" functionid="urA_;gxdKderFu(pM$LP"/></block></next></block></next></block></statement></block></statement></block><block type="device_button_event" id="v-g7c,b4:0RTde/LOq9`" x="498" y="447"><field name="NAME">Button.B</field><statement name="HANDLER"><block type="controls_if" id="=1a$9MP:c)rJ%$VM!-az"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="*R)9//BHg:JxI!`$$g5+"><field name="VAR" id=",|jHSG{.jC+cJXaehB3G">start</field></block></value><statement name="DO0"><block type="variables_change" id="T)[QTCbh~GxxLX@O,`;W"><field name="VAR" id="sy4)7|F8zho}{F)BkO_Y">hand</field><value name="VALUE"><shadow type="math_number" id="3/R#j`FO*9:{#/|d(oKT"><field name="NUM">1</field></shadow></value><next><block type="variables_set" id="P46Vfql*A|8SeVk`W/gl"><field name="VAR" id="sy4)7|F8zho}{F)BkO_Y">hand</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_modulo" id="i~2hvi[;0nvC5q`#]-_n"><value name="DIVIDEND"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="K.DThoWn5Htu]B_98rHl"><field name="VAR" id="sy4)7|F8zho}{F)BkO_Y">hand</field></block></value><value name="DIVISOR"><shadow type="math_number" id="bi)6!tyku({YZayk?17w"><field name="NUM">3</field></shadow></value></block></value><next><block type="function_call" id="p0,c#*/CpCbC/6Hb@K::"><mutation name="showHand" functionid="urA_;gxdKderFu(pM$LP"/></block></next></block></next></block></statement></block></statement></block><block type="device_forever" id="zj=:satGNsVs(wva,g#2" x="-11" y="769"><comment>we don't need to do anything in the main program loop, everything in the code is triggered by events</comment></block><block type="radio_on_number_drag" id="}h!#ml:/N;3s4Cu?y$}5" x="554" y="913"><comment>if we receive a number, we compare it with our hand to see who wins</comment><data>0</data><value name="HANDLER_DRAG_PARAM_receivedNumber"><shadow type="argument_reporter_number" id="wEW?_wLE=:YD0^VKJe2W"><field name="VALUE">receivedNumber</field></shadow></value><statement name="HANDLER"><block type="controls_if" id="H5zz#47Meln7ozi^4.dZ"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="(gRDY7s:KXTTbZ.#nym5"><field name="VAR" id=",|jHSG{.jC+cJXaehB3G">start</field></block></value><statement name="DO0"><block type="variables_set" id="ohDZdHsEm*a,Jd0Wn6pd"><field name="VAR" id=",|jHSG{.jC+cJXaehB3G">start</field><comment>we then change the game state  to "waiting", while we process the results of the game</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="ri{]3nC;iwEE-Gklo;0x"><field name="BOOL">FALSE</field></block></value><next><block type="controls_if" id="@:lA`ehN/[x(pRF4!pa9"><mutation elseif="2"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="A+w~#)*_w*-s%,eVX}#9"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="#i4bi;RRA]AJ%$@n$;8v"><field name="VAR" id="sy4)7|F8zho}{F)BkO_Y">hand</field></block></value><value name="B"><shadow type="math_number" id="a2R#S#Zl}Q-8U]PxFT0w"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="controls_if" id="~mFk:LImW@(,@1OW0?2b"><mutation elseif="2"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="@#pW7(E}Zq|_l*bfn)d?"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="`L}f:7}Sv%)yI2t032!7"><field name="VALUE">receivedNumber</field></block></value><value name="B"><shadow type="math_number" id="mM~%X6ujB*by$1(rpH;5"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="function_call" id="vkU79u5AaM3;,{3dXPQb"><mutation name="draw" functionid="6!+HldsKJvz5hnH`y_fF"/></block></statement><value name="IF1"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="Q234KRl3Q7BOZE4`*DE;"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="g;p.gRX0Q2Kjwq:skw|Y"><field name="VALUE">receivedNumber</field></block></value><value name="B"><shadow type="math_number" id="t;2K]aO#);W+bC#e~Y{k"><field name="NUM">1</field></shadow></value></block></value><statement name="DO1"><block type="function_call" id="UCB1$RlWt8Xa?xc(|323"><mutation name="win" functionid="/ou.Cg?n_fBvpP}I|rEV"/></block></statement><value name="IF2"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="rL$VB-1xz,pWtTghXAq$"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="CKZOti0SO1lQLW/]vG|m"><field name="VALUE">receivedNumber</field></block></value><value name="B"><shadow type="math_number" id="h%~P2otZ;SyaM0[6$LqF"><field name="NUM">2</field></shadow></value></block></value><statement name="DO2"><block type="function_call" id="DDtF[drYdt%[f_(sXlr@"><mutation name="lose" functionid="FxfTg-S1=e0!KQ~VH_D0"/></block></statement></block></statement><value name="IF1"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=";^(E+?m#+,QruoUM8ZTc"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="^dv+yo@TUk](V%Pfpte^"><field name="VAR" id="sy4)7|F8zho}{F)BkO_Y">hand</field></block></value><value name="B"><shadow type="math_number" id="_XYlwlAK|0@B/Xlji[M0"><field name="NUM">1</field></shadow></value></block></value><statement name="DO1"><block type="controls_if" id="gt.L:iFI+sl!O~7w(i*b"><mutation elseif="2"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="-vco|iRW$v89pMq5;Jx1"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="y-D#%L/FkrQh`isnMdTF"><field name="VALUE">receivedNumber</field></block></value><value name="B"><shadow type="math_number" id="nvXOkGTXPvC8]5T44g$x"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="function_call" id="KswA?8y74Embj3=eMEs["><mutation name="lose" functionid="FxfTg-S1=e0!KQ~VH_D0"/></block></statement><value name="IF1"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="rHLX{nSmhJdXzO^LHrh."><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="INFq0e}O`6:ypZ.TSM,8"><field name="VALUE">receivedNumber</field></block></value><value name="B"><shadow type="math_number" id="jl_9!*GD_+Df=DGhmjL|"><field name="NUM">1</field></shadow></value></block></value><statement name="DO1"><block type="function_call" id="Azl3qc$2M#Qb@YjGPAg|"><mutation name="draw" functionid="6!+HldsKJvz5hnH`y_fF"/></block></statement><value name="IF2"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="f`{7oLs{}2[%qV$NdE|*"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="Gb/55hHw,84vip0Cv29s"><field name="VALUE">receivedNumber</field></block></value><value name="B"><shadow type="math_number" id="Dxd@fag9w,3=7;(2crul"><field name="NUM">2</field></shadow></value></block></value><statement name="DO2"><block type="function_call" id="}Z!YN##G:MoHQTu;tw?e"><mutation name="win" functionid="/ou.Cg?n_fBvpP}I|rEV"/></block></statement></block></statement><value name="IF2"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="hWte@Q4T2hMTrQ3cWlfc"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="QYzPSFj;_9c0!r[6sq}1"><field name="VAR" id="sy4)7|F8zho}{F)BkO_Y">hand</field></block></value><value name="B"><shadow type="math_number" id="fSFwAH6MQbUBt#|a@Jut"><field name="NUM">2</field></shadow></value></block></value><statement name="DO2"><block type="controls_if" id="k.7yBbmA;7s(-4bv?B(^"><mutation elseif="2"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="B(-S75AvW#CePfw]+bJ="><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="$/hlTSlw},^ar79R|a=g"><field name="VALUE">receivedNumber</field></block></value><value name="B"><shadow type="math_number" id="KFqLn-JMAS2NdZ.PP),-"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="function_call" id="Si-TaM),Te@;y+@qBcVf"><mutation name="win" functionid="/ou.Cg?n_fBvpP}I|rEV"/></block></statement><value name="IF1"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="Ys`qm00!G)dc+@4]eLG/"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="3s.@_RLotwl_^^;7zBW5"><field name="VALUE">receivedNumber</field></block></value><value name="B"><shadow type="math_number" id="xRbnN)P0Hxk@,(Yx0BHq"><field name="NUM">1</field></shadow></value></block></value><statement name="DO1"><block type="function_call" id=")I_g?=Kf!V/Xx6ajWR|H"><mutation name="lose" functionid="FxfTg-S1=e0!KQ~VH_D0"/></block></statement><value name="IF2"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="s@d,%spFXDPTn~7@SIx7"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="|^|nZ|FhIZx{C^cy1Aj)"><field name="VALUE">receivedNumber</field></block></value><value name="B"><shadow type="math_number" id="12,e;ID,J-tqYu]^bA/W"><field name="NUM">2</field></shadow></value></block></value><statement name="DO2"><block type="function_call" id="K}/]|uT?qr6aXc=:|pO:"><mutation name="draw" functionid="6!+HldsKJvz5hnH`y_fF"/></block></statement></block></statement><next><block type="controls_if" id="I(*b8|2)C!9q(9lUoRF`"><comment>if the players were playing out of sink, and this microbit recieved a hand but hadn't yet sent one, we send it here to not keep the other microbit waiting.</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id=";yEi_gW$T$`0|R0W(ydo"><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="lcvULRSt!U?BDwE5rK5P"><field name="VAR" id="4JPrp!d%7pat*O,-)wto">hand_sent</field></block></value></block></value><statement name="DO0"><block type="radio_datagram_send" id="iF/VA={A31+|vsC,_.2X"><value name="value"><block type="variables_get" id="@5A/DSnBPF5#!O}8TL%y"><field name="VAR" id="sy4)7|F8zho}{F)BkO_Y">hand</field></block></value><next><block type="variables_set" id="HscJSD[QHjy!lsM#Pfl?"><field name="VAR" id="4JPrp!d%7pat*O,-)wto">hand_sent</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="XyFW;2My[m)WNzqYktE#"><field name="BOOL">TRUE</field></block></value></block></next></block></statement><next><block type="device_pause" id="1uC$am_OZ$g#m$v2|;:)"><comment>wait a little bit with the game result on the display</comment><value name="pause"><shadow type="timePicker" id="s5ut9+(WUu_]2]NtW0z*"><field name="ms">2500</field></shadow></value><next><block type="function_call" id="mlL+H.0~3ZI8(TiNxNxd"><mutation name="init" functionid="bvSqr7vHOyExpu%`Ykjh"/><comment>after processing the results of the game, we reset the variables to start again.</comment></block></next></block></next></block></next></block></next></block></statement></block></statement></block><block type="radio_on_string_drag" id="3xZfCMqSiw3ne;PF[t9s" x="-14" y="979"><comment>if we receive a string, it means there is another microbit wanting to connect to us.
send a string in response, and initialise the game</comment><value name="HANDLER_DRAG_PARAM_receivedString"><shadow type="argument_reporter_string" id=":(}[L^E#%Ftox#h1rmn0"><field name="VALUE">receivedString</field></shadow></value><statement name="HANDLER"><block type="controls_if" id="^sPQo2zFn)6PbJ:rW,0*"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="Dt%pODPQI[}-K=5j)okt"><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="(}%U?~VF/S3paoLz=TDl"><field name="VAR" id=",|jHSG{.jC+cJXaehB3G">start</field></block></value></block></value><statement name="DO0"><block type="device_play_note" id="bU|j3!jzPRFb6CvhM=d:"><value name="note"><shadow type="device_note" id="h_Ami[an}zWZnA=T{@UL"><field name="name">523</field></shadow></value><value name="duration"><shadow type="device_beat" id="//wWeL2}IF^|5LoSXBJ6"><field name="fraction">BeatFraction.Eighth</field></shadow></value><next><block type="radio_datagram_send_string" id="z{-]q/8^%.=n[BmO-Ivn"><value name="msg"><shadow type="text" id="/U8A~~Kp@~J(M.gX-O;e"><field name="TEXT">hello!</field></shadow></value><next><block type="function_call" id="ExQ#V@Sc~_io|jVbZrOd"><mutation name="init" functionid="bvSqr7vHOyExpu%`Ykjh"/></block></next></block></next></block></statement></block></statement></block><block type="function_definition" id="J9nRH|verB8,9*,+p.:t" x="1354" y="1175"><mutation name="showHand" functionid="urA_;gxdKderFu(pM$LP"/><field name="function_name">showHand</field><statement name="STACK"><block type="controls_if" id="bf;)EF8/inUEa!s#Ze]="><mutation elseif="2"/><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="a[/Jaq_4e?wu1HrC92e/"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="Dg;Hrb:tOJ8y63Y9~}z:"><field name="VAR" id="sy4)7|F8zho}{F)BkO_Y">hand</field></block></value><value name="B"><shadow type="math_number" id="XN+qdTRg=Z4}f~mk~v^H"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="basic_show_icon" id="uRXS8z!#sNddJZq|$J8K"><field name="i">IconNames.Square</field></block></statement><value name="IF1"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id=";DP5b.Eb:xFPM_#^WCfv"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="NQReFB2PNdgDaBjwAHsM"><field name="VAR" id="sy4)7|F8zho}{F)BkO_Y">hand</field></block></value><value name="B"><shadow type="math_number" id="*w!M,Nc#eROyi:$6JI3z"><field name="NUM">1</field></shadow></value></block></value><statement name="DO1"><block type="basic_show_icon" id="lArE|{96+*B94_bgpM@H"><field name="i">IconNames.Diamond</field></block></statement><value name="IF2"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="T.epj_#p/XCiU%g$tUpk"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="5!IqY~3|BFas+01W#KiL"><field name="VAR" id="sy4)7|F8zho}{F)BkO_Y">hand</field></block></value><value name="B"><shadow type="math_number" id="w{Ev(6/D]T8e??Vnigi$"><field name="NUM">2</field></shadow></value></block></value><statement name="DO2"><block type="basic_show_icon" id="EG@3)`G_Z]%XT:BeCn64"><field name="i">IconNames.Scissors</field></block></statement></block></statement></block><block type="function_definition" id="sRB)yo;v%xh!-`7uKQ/c" x="-8" y="1367"><mutation name="init" functionid="bvSqr7vHOyExpu%`Ykjh"/><field name="function_name">init</field><comment>change the game state to "ready"
set the shake counter to 5
choose a random hand</comment><statement name="STACK"><block type="variables_set" id="E95%@+,C4oCC|yYFUI{{"><field name="VAR" id=",|jHSG{.jC+cJXaehB3G">start</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="h9f?;Ng|w)7Ozysx(t)|"><field name="BOOL">TRUE</field></block></value><next><block type="variables_set" id="m}j(uKy15@|[`$iA8Hfm"><field name="VAR" id="IysI%cH8PN7ZlxUYosic">count</field><comment>we use the "count" variable to keep track of how many times we have shaken the microbit</comment><value name="VALUE"><shadow type="math_number" id=".)_hB?PSg$Y8()~,wY:9"><field name="NUM">5</field></shadow></value><next><block type="variables_set" id="?LG=yvjuOG#4+Q%H@ZSb"><field name="VAR" id="sy4)7|F8zho}{F)BkO_Y">hand</field><comment>the "hand" variable stores what hand we want to play</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_random" id="ClEy#,cbf;{TNypY5sy}"><value name="min"><shadow type="math_number" id="l35EWG$V3l+S8f?4A2.^"><field name="NUM">0</field></shadow></value><value name="limit"><shadow type="math_number" id="h--;,yB|`fo$:ZFSMsdz"><field name="NUM">2</field></shadow></value></block></value><next><block type="variables_set" id="zvp8m:UI,WvaUa#qMlNM"><field name="VAR" id="4JPrp!d%7pat*O,-)wto">hand_sent</field><comment>"hand_sent" is to know if we have sent our hand to the other player yet or not.  this way we can check at the end of the game if the other player is still waiting for us or not, in case we were shaking out of sync.</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="5]w*CDUEKw7f.qKO4Qos"><field name="BOOL">FALSE</field></block></value><next><block type="basic_show_icon" id="I~@b=NiEmK?3nM*Ts-Ea"><field name="i">IconNames.Yes</field></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="rS4CeA6p{xCI.)zRuGF#" x="1367" y="1758"><mutation name="draw" functionid="6!+HldsKJvz5hnH`y_fF"/><field name="function_name">draw</field><statement name="STACK"><block type="basic_show_icon" id="X^ySCO0%%~P:u`a5jv,r"><field name="i">IconNames.Asleep</field><next><block type="device_play_note" id="Q@C%7bZD;7:Y(EDHis%J"><value name="note"><shadow type="device_note" id="TD:D}ACTBaZkdXS_Lu@("><field name="name">349</field></shadow></value><value name="duration"><shadow type="device_beat" id="ZG^-RcSm+xF=V7zXVY]J"><field name="fraction">BeatFraction.Eighth</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="Gvae86kD*T0oU0LE93Rp" x="1370" y="2037"><mutation name="win" functionid="/ou.Cg?n_fBvpP}I|rEV"/><field name="function_name">win</field><statement name="STACK"><block type="basic_show_icon" id="fg[g`E8:kh4*@:y]=n*J"><field name="i">IconNames.Happy</field><next><block type="device_play_note" id="4T,bH7zV34vsWQpf.sk|"><value name="note"><shadow type="device_note" id="/Vr9Td34G8sRr1:Ms.fr"><field name="name">523</field></shadow></value><value name="duration"><shadow type="device_beat" id="6(Kg_-_MBD;m!Mu}]9)y"><field name="fraction">BeatFraction.Eighth</field></shadow></value><next><block type="device_pause" id="(OgFjM%vSFUxC%NeHDV$"><value name="pause"><shadow type="timePicker" id="c=HQUd!kvRoE2{-tCwb:"><field name="ms">50</field></shadow></value><next><block type="device_play_note" id="%~,pR^=%?2;wvn{cD}8P"><value name="note"><shadow type="device_note" id="Zua5[7JFG.X]I?#qJ:v/"><field name="name">523</field></shadow></value><value name="duration"><shadow type="device_beat" id="jN[M[VJR{h=xSty6cc/m"><field name="fraction">BeatFraction.Half</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="._/:WoM)@gRuF55bx2ft" x="1373" y="2428"><mutation name="lose" functionid="FxfTg-S1=e0!KQ~VH_D0"/><field name="function_name">lose</field><statement name="STACK"><block type="basic_show_icon" id="MN)=,[KDog8F.q!DmZdK"><field name="i">IconNames.Sad</field></block></statement></block></xml>